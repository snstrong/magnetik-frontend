(this["webpackJsonpmagnetik-frontend"]=this["webpackJsonpmagnetik-frontend"]||[]).push([[0],{164:function(e,t,r){},166:function(e,t,r){},193:function(e,t,r){},197:function(e,t){},199:function(e,t){},214:function(e,t){},216:function(e,t){},244:function(e,t){},246:function(e,t){},247:function(e,t){},252:function(e,t){},254:function(e,t){},260:function(e,t){},262:function(e,t){},281:function(e,t){},293:function(e,t){},296:function(e,t){},313:function(e,t,r){},314:function(e,t,r){"use strict";r.r(t);var a=r(2),n=r.n(a),s=r(155),c=r.n(s),i=(r(164),r(8)),o=r.n(i),l=r(9),u=r(13),b=r(10),j=r(14),m=(r(166),r(0));var d=function(){return Object(m.jsx)("div",{className:"Homepage",children:Object(m.jsx)("div",{className:"container p-5",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsxs)("div",{className:"col-md-8 mx-auto my-auto p-5",children:[Object(m.jsx)("h1",{className:"Homepage-brand",children:"Magnetik"}),Object(m.jsx)("h2",{className:"Homepage-tagline pb-3",children:"Leave your word choice to chance."}),Object(m.jsx)("a",{className:"btn btn-primary",href:"/writespace",children:"Write a Poem"})]})})})})},p=r(6);var h=function(e){var t=e.register,r=Object(j.g)(),n={username:"",password:"",firstName:"",lastName:"",email:""},s=Object(a.useState)(n),c=Object(b.a)(s,2),i=c[0],d=c[1],h=function(e){var t=e.target,r=t.name,a=t.value;d((function(e){return Object(l.a)(Object(l.a)({},i),{},Object(p.a)({},r,a))}))};function f(){return(f=Object(u.a)(o.a.mark((function e(a){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,t(i);case 3:!0===(s=e.sent).success?(d(n),r.push("/writespace")):console.error("Registration failed",s.errors);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(m.jsxs)("div",{className:"RegisterForm container",children:[Object(m.jsx)("h1",{children:"Sign Up"}),Object(m.jsxs)("form",{onSubmit:function(e){return f.apply(this,arguments)},children:[Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{className:"form-label",htmlFor:"username",children:"Username"}),Object(m.jsx)("input",{autoComplete:"username",className:"form-control",id:"username",name:"username",onChange:h,value:i.username})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{className:"form-label",htmlFor:"password",children:"Password"}),Object(m.jsx)("input",{autoComplete:"new-password",type:"password",id:"password",name:"password",onChange:h,value:i.password,className:"form-control"})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{className:"form-label",htmlFor:"firstName",children:"First Name"}),Object(m.jsx)("input",{id:"firstName",name:"firstName",onChange:h,value:i.firstName,className:"form-control"})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{className:"form-label",htmlFor:"lastName",children:"Last Name"}),Object(m.jsx)("input",{id:"lastName",name:"lastName",onChange:h,value:i.lastName,className:"form-control"})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{className:"form-label",htmlFor:"email",children:"Email"}),Object(m.jsx)("input",{type:"email",id:"email",name:"email",onChange:h,value:i.email,className:"form-control"})]}),Object(m.jsx)("button",{className:"btn btn-primary",children:"Submit"})]})]})};var f=function(e){var t=e.login,r=Object(j.g)(),n=Object(a.useState)({username:"",password:""}),s=Object(b.a)(n,2),c=s[0],i=s[1],d=function(e){var t=e.target,r=t.name,a=t.value;i((function(e){return Object(l.a)(Object(l.a)({},c),{},Object(p.a)({},r,a))}))};function h(){return(h=Object(u.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,t(c);case 3:(n=e.sent).success?r.push("/writespace"):console.error(n.errors);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(m.jsxs)("div",{className:"LoginForm container",children:[Object(m.jsx)("h2",{children:"Login"}),Object(m.jsxs)("form",{onSubmit:function(e){return h.apply(this,arguments)},children:[Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{className:"form-label",htmlFor:"username",children:"Username"}),Object(m.jsx)("input",{autoComplete:"username",className:"form-control",id:"username",name:"username",value:c.username,onChange:d,required:!0})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{className:"form-label",htmlFor:"password",children:"Password"}),Object(m.jsx)("input",{autoComplete:"current-password",className:"form-control",type:"password",id:"password",name:"password",value:c.password,onChange:d,required:!0})]}),Object(m.jsx)("button",{className:"btn btn-primary",children:"Submit"})]})]})};var O=function(e){var t=e.type,r=void 0===t?"danger":t,a=e.messages,n=void 0===a?[]:a;return console.debug("Alert","type=",r,"messages=",n),Object(m.jsx)("div",{className:"alert alert-".concat(r),role:"alert",children:n.map((function(e){return Object(m.jsx)("p",{className:"mb-0 small",children:e},e)}))})},v=r(3),g=r(4),x=r(158),N=r.n(x),w="https://magnetik.herokuapp.com",y=function(){function e(){Object(v.a)(this,e)}return Object(g.a)(e,null,[{key:"request",value:function(){var t=Object(u.a)(o.a.mark((function t(r){var a,n,s,c,i,l,u=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:{},n=u.length>2&&void 0!==u[2]?u[2]:"get",s="".concat(w,"/").concat(r),c={Authorization:"Bearer ".concat(e.token)},i="get"===n?a:{},t.prev=5,t.next=8,N()({url:s,method:n,data:a,params:i,headers:c});case 8:return t.abrupt("return",t.sent.data);case 11:throw t.prev=11,t.t0=t.catch(5),console.error("API Error:",t.t0.response),l=t.t0.response.data.error.message,Array.isArray(l)?l:[l];case 16:case"end":return t.stop()}}),t,null,[[5,11]])})));return function(e){return t.apply(this,arguments)}}()},{key:"register",value:function(){var t=Object(u.a)(o.a.mark((function t(r){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("auth/register",r,"post");case 2:return a=t.sent,e.token=a.token,t.abrupt("return",a.token);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"login",value:function(){var t=Object(u.a)(o.a.mark((function t(r){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("auth/token",r,"post");case 2:return a=t.sent,e.token=a.token,t.abrupt("return",a.token);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getCurrentUser",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users/".concat(t));case 2:return r=e.sent,e.abrupt("return",r.user);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Object(u.a)(o.a.mark((function e(t,r){var a,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in a={},r)r[n].length>0&&(a[n]=r[n]);return e.next=4,this.request("users/".concat(t),a,"patch");case 4:return s=e.sent,e.abrupt("return",s.user);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getWordList",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("writespace");case 2:return t=e.sent,e.abrupt("return",t.wordList);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createWritespace",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("writespace/".concat(t.username),t,"post");case 2:return r=e.sent,console.debug("res=",r),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),k=y,S=n.a.createContext();var C=function(){var e=Object(a.useContext)(S),t=e.currentUser,r=e.setCurrentUser;console.debug("User:",t);var n=Object(a.useState)({firstName:t.firstName,lastName:t.lastName,email:t.email,username:t.username,password:""}),s=Object(b.a)(n,2),c=s[0],i=s[1],j=Object(a.useState)([]),d=Object(b.a)(j,2),h=d[0],f=d[1],v=Object(a.useState)(!1),g=Object(b.a)(v,2),x=g[0],N=g[1];function w(){return(w=Object(u.a)(o.a.mark((function e(t){var a,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={firstName:c.firstName,lastName:c.lastName,email:c.email,password:c.password},n=c.username,e.prev=3,e.next=6,k.updateCurrentUser(n,a);case 6:s=e.sent,e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(3),f(e.t0),e.abrupt("return");case 14:i((function(e){return Object(l.a)(Object(l.a)({},e),{},{password:""})})),f([]),N(!0),r(s);case 18:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function y(e){var t=e.target,r=t.name,a=t.value;i((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(p.a)({},r,a))})),f([])}return console.debug("ProfileForm","currentUser=",t,"formData=",c,"formErrors=",h,"saveConfirmed=",x),Object(m.jsxs)("div",{className:"col-md-6 col-lg-4 offset-md-3 offset-lg-4",children:[Object(m.jsx)("h3",{children:"Profile"}),Object(m.jsx)("div",{className:"card",children:Object(m.jsx)("div",{className:"card-body",children:Object(m.jsxs)("form",{children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:"Username"}),Object(m.jsx)("p",{className:"form-control-plaintext",children:c.username})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:"First Name"}),Object(m.jsx)("input",{name:"firstName",className:"form-control",value:c.firstName,onChange:y})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:"Last Name"}),Object(m.jsx)("input",{name:"lastName",className:"form-control",value:c.lastName,onChange:y})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:"Email"}),Object(m.jsx)("input",{name:"email",className:"form-control",value:c.email,onChange:y})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:"Confirm password to make changes:"}),Object(m.jsx)("input",{type:"password",name:"password",className:"form-control",value:c.password,onChange:y})]}),h.length?Object(m.jsx)(O,{type:"danger",messages:h}):null,x?Object(m.jsx)(O,{type:"success",messages:["Updated successfully."]}):null,Object(m.jsx)("button",{className:"btn btn-primary btn-block mt-4",onClick:function(e){return w.apply(this,arguments)},children:"Save Changes"})]})})})]})},F=r(58),U=r(30);var W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=localStorage.getItem(e)||t,n=Object(a.useState)(r),s=Object(b.a)(n,2),c=s[0],i=s[1];return Object(a.useEffect)((function(){null===c?localStorage.removeItem(e):localStorage.setItem(e,c)}),[e,c]),[c,i]},J=function(e){var t=e.createNewWritespace,r=(e.hide,Object(a.useState)({title:""})),n=Object(b.a)(r,2),s=n[0],c=n[1],i=Object(j.g)();function d(){return(d=Object(u.a)(o.a.mark((function e(r){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,t(s);case 3:!0===(a=e.sent).success?i.push("/writespaces/".concat(a.username,"/").concat(a.writespaceId)):console.error("Create writespace failed",a.errors);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(m.jsxs)("form",{className:"form-inline",onSubmit:function(e){return d.apply(this,arguments)},children:[Object(m.jsx)("label",{className:"mb-2",htmlFor:"title",children:"Title"}),Object(m.jsx)("input",{type:"text",className:"form-control mb-2 mr-sm-2",id:"title",name:"title",placeholder:"Untitled",value:s.title,onChange:function(e){var t=e.target,r=t.name,a=t.value;c((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(p.a)({},r,a))}))}}),Object(m.jsx)("button",{className:"btn btn-primary mb-2",children:"Save"})]})};r(193);var L=function(){var e=Object(a.useContext)(S).currentUser,t=W("wordTiles"),r=Object(b.a)(t,2),n=r[0],s=r[1],c=Object(a.useState)({stageBgFill:"#d4dddd",tileBgFill:"white",tileStroke:"#555",tileFontSize:16,tileHeight:30,stageWidth:1e3,stageHeight:1e3}),i=Object(b.a)(c,2),j=i[0],d=(i[1],Object(a.useState)(!1)),h=Object(b.a)(d,2),f=h[0],v=h[1],g=Object(a.useState)(null),x=Object(b.a)(g,2),N=x[0],w=x[1],y=Object(a.useState)(!1),C=Object(b.a)(y,2),L=C[0],D=C[1];function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,r=20,a=e-t;return Math.floor(Math.random()*(a-r)+r)}function P(e){var t,r=e.id,a=e.word;return{word:a,id:r,x:H(j.stageWidth),y:H(j.stageHeight),width:(t=a.length,t<=2?t*j.tileFontSize:Math.round(t*j.tileFontSize*.75)),isDragging:!1}}var E=function(e){var t=e.target.id(),r=Object(l.a)(Object(l.a)({},JSON.parse(n)),{},Object(p.a)({},t,Object(l.a)(Object(l.a)({},JSON.parse(n)[t]),{},{isDragging:!0})));s(JSON.stringify(Object(l.a)({},r)))},q=function(e){var t=e.target.id(),r=e.target.x(),a=e.target.y(),c=Object(l.a)(Object(l.a)({},JSON.parse(n)),{},Object(p.a)({},t,Object(l.a)(Object(l.a)({},JSON.parse(n)[t]),{},{x:r,y:a,isDragging:!1})));s(JSON.stringify(Object(l.a)({},c)))};function I(){return(I=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.getWordList();case 3:return t=e.sent,e.abrupt("return",t);case 7:e.prev=7,e.t0=e.catch(0),console.error("Writespace fetchWordList",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function z(){return(z=Object(u.a)(o.a.mark((function t(r){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,a={title:r.title,username:e.username,width:j.stageWidth,height:j.stageHeight},t.next=6,k.createWritespace(a);case 6:return t.sent,t.abrupt("return",{success:!0});case 10:return t.prev=10,t.t0=t.catch(2),console.error(t.t0),t.abrupt("return",{success:!1});case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){n&&!0!==f||function(){return I.apply(this,arguments)}().then((function(e){var t,r={},a=Object(F.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value,c=P(n);r[n.id]=c}}catch(i){a.e(i)}finally{a.f()}s(JSON.stringify(Object(l.a)({},r)))})),v(!1)}),[f]),n?(window.addEventListener("resize",(function(e){})),Object(m.jsxs)("div",{className:"Writespace",children:[Object(m.jsxs)("div",{className:"WritespaceToolbar p-3 container-fluid",style:{backgroundColor:"#8da5a5"},children:[Object(m.jsxs)("div",{className:"row justify-content-center",children:[e&&Object(m.jsx)("button",{className:"btn btn-primary col-6 col-sm-4 col-md-3 col-lg-2",onClick:function(){w(!0),D(!0),setTimeout((function(){w(!1),D(!1)}),2e3)},children:"Save"}),Object(m.jsx)("button",{type:"reset",className:"btn btn-secondary col-6 col-sm-4 col-md-3 col-lg-2",onClick:function(){return v(!0)},children:"Reset"}),Object(m.jsx)("button",{type:"reset",className:"btn btn-light col-6 col-sm-4 col-md-3 col-lg-2",onClick:function(){var e=Object(l.a)({},JSON.parse(n));for(var t in e)e[t]=Object(l.a)(Object(l.a)({},JSON.parse(n)[t]),{},{x:H(j.stageWidth),y:H(j.stageHeight)});s(JSON.stringify(Object(l.a)({},e)))},children:"Scramble"})]}),L&&Object(m.jsx)(J,{createNewWritespace:function(e){return z.apply(this,arguments)},hide:L}),N&&Object(m.jsx)(O,{messages:["Currently unavailable. Please try again later."]})]}),Object(m.jsx)("div",{className:"Stage-container",children:Object(m.jsx)("div",{className:"Stage-wrapper",children:Object(m.jsx)(U.d,{width:j.stageWidth,height:j.stageHeight,children:Object(m.jsxs)(U.b,{children:[Object(m.jsx)(U.c,{fill:j.stageBgFill||"#b6bbc2",width:j.stageWidth,height:j.stageHeight,opacity:.95}),n&&function(e){var t=[];for(var r in e)t.push(Object(m.jsxs)(U.a,{draggable:!0,id:"".concat(r),x:e[r].x,y:e[r].y,onDragStart:E,onDragEnd:q,scaleX:e[r].isDragging?1.05:1,scaleY:e[r].isDragging?1.05:1,children:[Object(m.jsx)(U.c,{width:e[r].width,height:j.tileHeight,fill:"white",stroke:"#555"}),Object(m.jsx)(U.e,{text:e[r].word,width:e[r].width,align:"center",fontSize:j.tileFontSize,fontFamily:"monospace",offsetY:-8})]},"".concat(r)));return t}(JSON.parse(n))]})})})})]})):Object(m.jsx)("h1",{children:"Loading..."})};var D=function(e){var t=e.exact,r=e.path,n=e.children;return Object(a.useContext)(S).currentUser?Object(m.jsx)(j.b,{exact:t,path:r,children:n}):Object(m.jsx)(j.a,{to:"/login"})};var H=function(e){var t=e.login,r=e.register;return Object(m.jsx)("div",{children:Object(m.jsxs)(j.d,{children:[Object(m.jsx)(j.b,{exact:!0,path:"/",children:Object(m.jsx)(d,{})}),Object(m.jsx)(j.b,{exact:!0,path:"/login",children:Object(m.jsx)(f,{login:t})}),Object(m.jsx)(j.b,{exact:!0,path:"/signup",children:Object(m.jsx)(h,{register:r})}),Object(m.jsx)(D,{exact:!0,path:"/profile",children:Object(m.jsx)(C,{})}),Object(m.jsx)(j.b,{exact:!0,path:"/writespace",children:Object(m.jsx)(L,{})}),Object(m.jsx)(j.a,{to:"/"})]})})},P=r(16),E=r(160),q=r.n(E);var I=function(e){var t=e.logout,r=Object(a.useContext)(S).currentUser;return Object(m.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(m.jsxs)("div",{className:"container-fluid",children:[Object(m.jsx)("a",{className:"navbar-brand",href:"/",children:"Magnetik"}),Object(m.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(m.jsx)("span",{className:"navbar-toggler-icon"})}),Object(m.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:r?Object(m.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(P.b,{className:"nav-link",to:"./writespace",children:"Writespace"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(P.b,{className:"nav-link",to:"./profile",children:"Profile"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsxs)(P.b,{className:"nav-link",to:"./logout",onClick:t,children:["Logout ",r.username]})})]}):Object(m.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(P.b,{className:"nav-link",to:"./writespace",children:"Writespace"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(P.b,{className:"nav-link",to:"/signup",children:"Sign Up"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(P.b,{className:"nav-link",to:"/login",children:"Log In"})})]})})]})})};r(313);var z=function(){var e=Object(a.useState)(!1),t=Object(b.a)(e,2),r=t[0],n=t[1],s=Object(a.useState)(null),c=Object(b.a)(s,2),i=c[0],j=c[1],d=W("token"),p=Object(b.a)(d,2),h=p[0],f=p[1];function O(){return(O=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.register(t);case 3:return r=e.sent,f(JSON.stringify(r)),e.abrupt("return",{success:!0});case 8:return e.prev=8,e.t0=e.catch(0),console.error("signup failed",e.t0),e.abrupt("return",{success:!1,errors:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function v(){return(v=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.login(t);case 3:return r=e.sent,f(JSON.stringify(r)),e.abrupt("return",{success:!0});case 8:return e.prev=8,e.t0=e.catch(0),console.error("login failed",e.t0),e.abrupt("return",{success:!1,errors:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){function e(){return(e=Object(u.a)(o.a.mark((function e(){var t,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=14;break}return e.prev=1,t=q.a.decode(JSON.parse(h)),r=t.username,k.token=JSON.parse(h),e.next=6,k.getCurrentUser(r);case 6:a=e.sent,j(Object(l.a)({},a)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error("App loadUserInfo: problem loading",e.t0),j(null);case 14:n(!0);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}n(!1),function(){e.apply(this,arguments)}()}),[h]),r?Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(P.a,{children:Object(m.jsxs)(S.Provider,{value:{currentUser:i,setCurrentUser:j},children:[Object(m.jsx)(I,{logout:function(){j(null),f(null)}}),Object(m.jsx)(H,{login:function(e){return v.apply(this,arguments)},register:function(e){return O.apply(this,arguments)}})]})})}):Object(m.jsx)("h1",{children:"Loading..."})},A=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,315)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;r(e),a(e),n(e),s(e),c(e)}))};c.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(z,{})}),document.getElementById("root")),A()}},[[314,1,2]]]);
//# sourceMappingURL=main.77a63125.chunk.js.map